<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
</head>

<style>
    .zoom:hover {
        transform: scale(1.1);
        transition: 0.5s;
    }

    .blueButton {
        background-color: #175fa3;
        border: none;
        color: white;
        padding: 7px 20px;
        text-align: center;
        text-decoration: none;
        font-size: 12px;
        float: left;
    }

    #instanceDiv::-webkit-scrollbar {
        height: 3px;
    }

    #instanceDiv::-webkit-scrollbar-track {
        box-shadow: inset 0 0 5px rgb(255, 255, 255);
        background-color: rgb(218, 218, 218);
        border-radius: 10px;
    }

    #instanceDiv::-webkit-scrollbar-thumb {
        background: rgb(194, 189, 189);
        border-radius: 10px;
    }
</style>

<body>
    <!-- Side navigation bar -->
    <img alt=">" src='https://img.icons8.com/fluent/50/000000/menu.png' onclick="showSideNav()" id="hamBurger" style="z-index: 100; width: 30px; height: 30px; position: fixed; left: 10px; top: 10px; cursor: pointer;"/>

    <!-- TradingView Widget BEGIN -->
    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>

    <!-- <div id="sideNavHolder">
        <%include ./partials/sideNav.ejs%>
    </div> -->

    <div style="margin: 20px">
        <div class="row">
            <div id="chartHolder" symbol="<%=symbol%>" class="col-sm-8" style="margin-top: 20px; margin-left: -20px; float: left">
                <script type="text/javascript">
                    new TradingView.widget({
                        "container_id": 'technical-analysis',
                        "width": 800,
                        "height": 400,
                        "symbol": document.getElementById("chartHolder").symbol,
                        "interval": "H",
                        "timezone": "exchange",
                        "theme": "White",
                        "style": "1",
                        "toolbar_bg": "#f1f3f6",
                        "withdateranges": true,
                        "hide_side_toolbar": false,
                        "allow_symbol_change": false,
                        "save_image": false,
                        "hideideas": true,
                        "studies": [],
                        "show_popup_button": true,
                        "popup_width": "1000",
                        "popup_height": "650"
                    });
                </script>
            </div>

            <div class="col-sm-4" style="margin-left: 10px;">
                <div class="card shadow-lg" style="float: right; width: 350px; height: 400px; margin: 20px auto;">
                    <font size = 3 class="text-muted" style="margin: 10px">
                        Currently tracking
                    </font>

                    <div class="card shadow zoom" style="height: 60px; margin: 5px; cursor: pointer;">
                        <font size = 2 style="margin-left: 5px; margin-top: 5px; letter-spacing: 1px;">
                            <b>TATASTEEL</b><br>
                            <font size = 3 class = "text-muted">
                                ₹ 710.50
                            </font>
                        </font>
                    </div>
                </div>
            </div>
        </div>

        <br>

        <hr>

        <h5><b>Instances</b></h5>

        <div id="instanceDiv" style="overflow-x: auto; overflow-y: hidden; height: 300px; width: 95%; white-space: nowrap;">
            <%instances.forEach((instance) => {%>
                <div style="margin:20px; width:350px; display: inline-block; cursor: pointer;" onclick="location.href='/instance?instanceId=<%=instance._id%>'" class="card shadow zoom">
                    <div style="margin-top: 10px;">
                        <span style="line-height: 1.2; float: left; margin-left: 10px;">
                            <font size = 2><b>Instance 1</b></font><br>
                            <font size = 2 class="text-muted" style="cursor: pointer;"><%=instance._id%></font>
                        </span>
                    </div>

                    <br><br>
            
                    <div class="card-body" style="margin: -10px auto; text-align: center; width: 90%">
                        <div class="row" style="margin-left: -50px;">
                            <span class="col-4">
                                <font size = 1 class="text-muted">Investment</font><br>
                                <font size = 2><b>₹<%=instance.investment%></b></font size = 2>
                            </span>
                            <span class="col-4">
                                <font size = 1 class="text-muted">Goal</font><br>
                                <font size = 2><b>₹<%=instance.goal%></b></font>
                            </span>
                            <span class="col-4">
                                <font size = 1 class="text-muted">Session</font><br>
                                <font size = 2><b>1 / <%=instance.time%> months</b></font>
                            </span>
                        </div>
            
                        <div class="row" style="margin-left: -50px; margin-top: 10px">
                            <span class="col-4">
                                <font size = 1 class="text-muted">Current Session</font><br>
                                <font size = 2><b>Solo</b></font size = 2>
                            </span>
                            <span class="col-4">
                                <font size = 1 class="text-muted">Leverage</font><br>
                                <font size = 2><b><%=instance.leverage%></b></font>
                            </span>
                            <span class="col-4">
                                <font size = 1 class="text-muted">Daily Profit</font><br>
                                <font size = 2><b><%=instance.dayProfit%>%</b></font>
                            </span>
                        </div>
                    </div>
            
                    <div>
                        <div style="width: 90%; margin: 2px auto; margin-bottom: 10px;">
                            <div class="progress" style="height: 5px;">
                                <div class="progress-bar" role="progressbar" style="width: 25%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
            
                            <div>
                                <span>
                                    <font size = 1 class="text-muted">Weekly Target</font>
                                </span>
                                <span style="float: right;">
                                    <font size = 1 class="text-muted">1.34 / <%=5*instance.dayProfit%>%</font>
                                </span>
                            </div>
                        </div>
            
                        <!-- <div style="width:30%; float: right; margin-top:-5px; text-align: right;">
                            <span class="blueButton" style="cursor:pointer">
                                Register
                            </span>
                        </div> -->
                    </div>
                </div>
            <%});%>
        </div>

        <br>
    </div>

    <!-- Bottom Navigation bar -->
    <div id="bottomNavHolder">
        <%include ./partials/bottomNav.ejs%>
    </div>
</body>

<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

</html>